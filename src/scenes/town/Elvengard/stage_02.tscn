[gd_scene load_steps=19 format=4 uid="uid://rgxcqfavxxsq"]

[ext_resource type="Script" uid="uid://c8ciiojeeeyfh" path="res://src/scripts/town/BaseStage.gd" id="1"]
[ext_resource type="Texture2D" uid="uid://470lowt2oq3q" path="res://assets/images/map/tiles/elvengardobject05.png" id="2"]
[ext_resource type="PackedScene" path="res://src/scenes/com/DoorArea.tscn" id="3"]
[ext_resource type="Texture2D" uid="uid://t3nulnc5w84w" path="res://assets/images/map/tiles/01tile03.png" id="4"]
[ext_resource type="Texture2D" uid="uid://b551mpq58lfxw" path="res://assets/images/map/bg/01mid1.png" id="5"]
[ext_resource type="PackedScene" path="res://src/component/obj/01obj009.tscn" id="6"]
[ext_resource type="Texture2D" uid="uid://i0hdl8s5q4yw" path="res://assets/images/map/bg/01far1.png" id="7"]
[ext_resource type="PackedScene" path="res://src/component/obj/01obj102.tscn" id="10"]
[ext_resource type="PackedScene" path="res://src/component/obj/elvenrdg.tscn" id="11"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_pid3s"]
texture = ExtResource("4")
texture_region_size = Vector2i(224, 236)

[sub_resource type="TileSet" id="1"]
tile_size = Vector2i(224, 236)
sources/1 = SubResource("TileSetAtlasSource_pid3s")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_bhi25"]
texture = ExtResource("2")
texture_region_size = Vector2i(224, 81)
0:0/next_alternative_id = 8
0:0/0 = 0
0:0/1 = 1
0:0/1/flip_h = true
0:0/2 = 2
0:0/2/flip_v = true
0:0/3 = 3
0:0/3/flip_h = true
0:0/3/flip_v = true
0:0/4 = 4
0:0/4/transpose = true
0:0/5 = 5
0:0/5/flip_h = true
0:0/5/transpose = true
0:0/6 = 6
0:0/6/flip_v = true
0:0/6/transpose = true
0:0/7 = 7
0:0/7/flip_h = true
0:0/7/flip_v = true
0:0/7/transpose = true

[sub_resource type="TileSet" id="2"]
tile_size = Vector2i(224, 81)
sources/1 = SubResource("TileSetAtlasSource_bhi25")

[sub_resource type="RectangleShape2D" id="3"]
size = Vector2(7.18914, 80)

[sub_resource type="RectangleShape2D" id="4"]
size = Vector2(10.11536, 78.021)

[sub_resource type="RectangleShape2D" id="5"]
size = Vector2(897.088, 108.1344)

[sub_resource type="RectangleShape2D" id="6"]
size = Vector2(896, 43.138)

[sub_resource type="RectangleShape2D" id="7"]
size = Vector2(37.6652, 282.864)

[node name="D_Elvengard" type="Node2D"]
script = ExtResource("1")
bgm = "forest_town"
env = "amb_forest_01"

[node name="environment" type="Node2D" parent="."]

[node name="GrassMap" type="TileMapLayer" parent="environment"]
use_parent_material = true
position = Vector2(0, 101)
tile_set = SubResource("1")

[node name="RoadMap" type="TileMapLayer" parent="environment"]
use_parent_material = true
position = Vector2(0, -7)
tile_map_data = PackedByteArray("AAABAAUAAQAAAAAAAAAAAAUAAQAAAAAAAAACAAUAAQAAAAAAAAADAAUAAQAAAAAAAAAEAAUAAQAAAAAAAAAFAAUAAQAAAAAAAAAAAAYAAQAAAAAAAAABAAYAAQAAAAAAAAACAAYAAQAAAAAAAAADAAYAAQAAAAAAAAAEAAYAAQAAAAAAAAAFAAYAAQAAAAAAAAAGAAYAAQAAAAAAAAAGAAUAAQAAAAAAAAA=")
tile_set = SubResource("2")

[node name="elvenrdg" parent="environment" instance=ExtResource("11")]
position = Vector2(810.977, 252.293)

[node name="01obj102" parent="environment" instance=ExtResource("10")]
position = Vector2(151.734, 159.622)

[node name="01obj009" parent="environment" instance=ExtResource("6")]
position = Vector2(320.486, 342.669)

[node name="background" type="ParallaxBackground" parent="environment"]

[node name="far" type="ParallaxLayer" parent="environment/background"]
motion_scale = Vector2(0.7, 1)
motion_mirroring = Vector2(640, 0)

[node name="Sprite2D" type="Sprite2D" parent="environment/background/far"]
texture = ExtResource("7")
centered = false
region_enabled = true
region_rect = Rect2(0, 0, 925, 375)

[node name="mid" type="ParallaxLayer" parent="environment/background"]
motion_scale = Vector2(0.9, 1)
motion_mirroring = Vector2(640, 0)

[node name="Sprite2D" type="Sprite2D" parent="environment/background/mid"]
texture = ExtResource("5")
centered = false
region_enabled = true
region_rect = Rect2(0, 0, 640, 379)

[node name="doors" type="Node2D" parent="."]

[node name="to_stage_01" parent="doors" instance=ExtResource("3")]
position = Vector2(3.58058, 440)
current = "stage_02"
target = "stage_01"

[node name="CollisionShape2D" parent="doors/to_stage_01" index="0"]
shape = SubResource("3")

[node name="pos" parent="doors/to_stage_01" index="1"]
position = Vector2(61.7949, 0)

[node name="to_Entrance" parent="doors" instance=ExtResource("3")]
position = Vector2(891.062, 438.173)
current = "stage_02"
target = "Lorien"
type = 2

[node name="CollisionShape2D" parent="doors/to_Entrance" index="0"]
shape = SubResource("4")

[node name="pos" parent="doors/to_Entrance" index="1"]
position = Vector2(-59.259, 0)

[node name="stage" type="Node2D" parent="."]

[node name="collision" type="Node2D" parent="."]

[node name="StaticBody2D" type="StaticBody2D" parent="collision"]
position = Vector2(442.17, 323.612)

[node name="CollisionShape2D" type="CollisionShape2D" parent="collision/StaticBody2D"]
position = Vector2(5, 0)
shape = SubResource("5")

[node name="StaticBody2D2" type="StaticBody2D" parent="collision"]
position = Vector2(448.306, 572.418)

[node name="CollisionShape2D" type="CollisionShape2D" parent="collision/StaticBody2D2"]
shape = SubResource("6")

[node name="right" type="StaticBody2D" parent="collision"]
position = Vector2(915.5, 426.253)

[node name="CollisionShape2D" type="CollisionShape2D" parent="collision/right"]
position = Vector2(-1, 0)
shape = SubResource("7")

[node name="left" type="StaticBody2D" parent="collision"]
position = Vector2(-18.8881, 448.278)

[node name="CollisionShape2D" type="CollisionShape2D" parent="collision/left"]
position = Vector2(-1, 0)
shape = SubResource("7")

[node name="TopLeft" type="Marker2D" parent="."]

[node name="BottomRight" type="Marker2D" parent="."]
position = Vector2(896, 600)

[editable path="doors/to_stage_01"]
[editable path="doors/to_Entrance"]
